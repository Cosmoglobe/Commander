#!/bin/sh
# script to generate SP and DP codes
# EH, Dec 2004 -- Jan 2005

SetDef(){
template_file=mpi_alm_tools_template.f90
outfile_s=mpi_alm_tools_ss.f90
outfile_d=mpi_alm_tools_dd.f90
}

#--------

IncludeWarning(){
    echo '!*******************************************************************' >  $outfile
    echo '!                     DO NOT EDIT THIS FILE'                          >> $outfile
    echo "!Edit $template_file and run $script (or local Makefile) instead"     >> $outfile
    echo '!******************************************************************'  >> $outfile
}

#--------

Substitute(){

echo "-----------------------------------------------"
echo "generating SP and DP routines for mpi_alm_tools"
echo "-----------------------------------------------"

kind=SP
suffix=s
outfile=$outfile_s
IncludeWarning $outfile
cat $template_file |\
	sed "s|KMAP|$kind|g" |\
	sed "s|KALM|$kind|g" |\
	sed "s|KLOAD|$suffix|g" >> $outfile
	
kind=DP
suffix=d
outfile=$outfile_d
IncludeWarning $outfile
cat $template_file |\
	sed "s|KMAP|$kind|g" |\
	sed "s|KALM|$kind|g" |\
	sed "s|KLOAD|$suffix|g" >> $outfile
}	

#--------

script=$0
SetDef
Substitute

exit

